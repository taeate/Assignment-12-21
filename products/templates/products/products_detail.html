{% extends 'layout.html' %}
{% block content %}
{% load static %}
<br>

<center>
    <h1>{{ product.display_name }}<br>
        <div class="t-text-red">저는원피스에요</div>
    </h1>
    <div>
        <br>
    </div>
    <div class="card">
        <div class="card-header">
        </div>
        <div class="wrap">
            {% if product.image %}
            <img class="t-h-[300px] t-w-[300px] " src="{{ product.image.url }}">
            {% else %}
            <div class="t-h-[155px] t-w-[155px]">이미지 준비중이에요</div>
            {% endif %}
            <div>
                번호 : {{product.id}}
            </div>
            <div>
                이름 : {{product.display_name}}
            </div>
            <div>
                <b style="color:red">{{ product.price }}원</b>
            </div>

            <div class="card-body">
                <table class="table table-hover">
                    <colgroup>
                        <col class="sm:t-w-40">
                        <col class="sm:t-w-40">
                        <col>
                    </colgroup>
                    <thead>
                    <tr>
                        <th>사이즈</th>
                        <th>색상</th>
                        <th>품절</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for product_real in product_reals %}
                    <tr>
                        <td>
                            {{ product_real.option_1_display_name }}
                        </td>
                        <td>
                            {{ product_real.option_2_display_name}}
                        </td>
                        <td>
                            {% if not product_real.is_sold_out %}
                            <span class="badge bg-primary">판매중</span>
                            {% else %}
                            <span class="badge bg-secondary">품절</span>
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
            <div>
                마켓 : {{product.market.name}}
            </div>
        </div>
    </div>

    <h5 style="color:blue">{{ questions.count }}개의 질문이 있습니다.</h5>
    <br>
    <div>
        <div style="display:inline-block">

            {% if questions %}
            <ul>
                {% for question in questions %}
                <li style="text-align:left">{{ forloop.counter}}. {{ question.body }}</li>
                <div>
                    <a href="{% url 'products:question_modify' product.id question.id  %}"
                       class="btn btn-sm btn-secondary">수정</a>
                    <br>
                    <a href="{% url 'products:question_delete' product.id question.id  %}"
                       class="btn btn-sm btn-warning"
                       onclick="if ( confirm('정말 삭제하시겠습니까?') == false ) return false;">삭제</a>
                </div>
                {% endfor %}
            </ul>
</center>
{% endif %}

{% if not questions %}
<div class="card-body">
    <div class="t-text-gray-400">
        질문이없습니다.
    </div>
</div>
{% endif %}
</div>
</div>

{% if user.is_authenticated %}
<form action="{% url 'products:question_create' product.id %}" method="post">
    {% csrf_token %}
    <textarea name="body" id="body" rows="15"></textarea>
    <input height="100px" type="submit" value="질문등록">
</form>
{% else %}
<div class="t-text-gray-400">
    <a href="{% url 'accounts:signup' %}">로그인</a> 후 이용해주세요.
</div>
{% endif %}
{% endblock %}

